{% extends "global/PageLikert.html" %}
{% load otree static %}
{% load listforloopcounter %}

{% block head_title %}
PEQ1
{% endblock %}


{% block content %}

<div class="col-12 alert alert-info" role="alert" style="color:black">
    Please answer the following questions according to your best knowledge. <strong>Please note that the scale labeling may change.</strong>
   </div> 

<br>

{% for field in form %}
{% if field.html_name == "pq29" %}
<br>

<div class="card">
  
  {% comment %}check if dynamic label is used via length of var_for_templates. if not, use regular form label{% endcomment %}
  {% if q_label|length >= 1 %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ q_label|get_at_index:forloop.counter0 }}</b></label> 
  </div>
  {% else %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ field.label }}</b></label> 
  </div>
  {% endif %}

    <div class="card-body">
        <ul class="{{ field.html_name }}" id="questionitem">
            {% for choice in field %}
                {% if forloop.counter == 1 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully disagree</label>
                </li>
                {% elif forloop.counter == 7 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully agree</label>
                </li>
                {% else %}
                  <li>
                      <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                      <label>{{ forloop.counter }}</label>
                  </li>
                {% endif %}
            {% endfor %}
          </ul>
        </div>
    </div>    
    
<br>   
{% endif %}
{% endfor %}

{% for field in form %}
{% if field.html_name == "pq30" %}
<br>

<div class="card">
  
  {% comment %}check if dynamic label is used via length of var_for_templates. if not, use regular form label{% endcomment %}
  {% if q_label|length >= 1 %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ q_label|get_at_index:forloop.counter0 }}</b></label> 
  </div>
  {% else %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ field.label }}</b></label> 
  </div>
  {% endif %}

    <div class="card-body">
        <ul class="{{ field.html_name }}" id="questionitem">
            {% for choice in field %}
                {% if forloop.counter == 1 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully disagree</label>
                </li>
                {% elif forloop.counter == 7 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully agree</label>
                </li>
                {% else %}
                  <li>
                      <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                      <label>{{ forloop.counter }}</label>
                  </li>
                {% endif %}
            {% endfor %}
          </ul>
        </div>
    </div>    
    
<br>   
{% endif %}
{% endfor %}

{% for field in form %}
{% if field.html_name == "pq32" %}
<br>

<div class="card">
  
  {% comment %}check if dynamic label is used via length of var_for_templates. if not, use regular form label{% endcomment %}
  {% if q_label|length >= 1 %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ q_label|get_at_index:forloop.counter0 }}</b></label> 
  </div>
  {% else %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ field.label }}</b></label> 
  </div>
  {% endif %}

    <div class="card-body">
        <ul class="{{ field.html_name }}" id="questionitem">
            {% for choice in field %}
                {% if forloop.counter == 1 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully disagree</label>
                </li>
                {% elif forloop.counter == 7 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully agree</label>
                </li>
                {% else %}
                  <li>
                      <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                      <label>{{ forloop.counter }}</label>
                  </li>
                {% endif %}
            {% endfor %}
          </ul>
        </div>
    </div>    
    
<br>   
{% endif %}
{% endfor %}

{% for field in form %}
{% if field.html_name == "pq31" %}
<!-- otherwise timerfield is also displayed -->
<div class="card bg-light m-3">
  <div class="card-body">

          <b>{{ field.label }}</b>
          <hr>
          {{ field }}

        </div></div>    

<br>   
{% endif %}
{% endfor %}

{% for field in form %}
{% if field.html_name == "pq31a" %}
<br>
<div id="depends" style="display: none;">
<div class="card">
  
  {% comment %}check if dynamic label is used via length of var_for_templates. if not, use regular form label{% endcomment %}
  {% if q_label|length >= 1 %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ q_label|get_at_index:forloop.counter0 }}</b></label> 
  </div>
  {% else %}
  <div class="card-header" style="text-align:left;">
    <label class="statement"><b>{{ field.label }}</b></label> 
  </div>
  {% endif %}

    <div class="card-body">
        <ul class="{{ field.html_name }}" id="questionitem">
            {% for choice in field %}
                {% if forloop.counter == 1 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully disagree</label>
                </li>
                {% elif forloop.counter == 7 %}
                <li>
                    <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                    <label>fully agree</label>
                </li>
                {% else %}
                  <li>
                      <input id="id_{{ field.html_name }}_{{ forloop.counter }}" type="radio" name="{{ field.html_name }}" value="{{ forloop.counter }}" class="form-check-input" required>
                      <label>{{ forloop.counter }}</label>
                  </li>
                {% endif %}
            {% endfor %}
          </ul>
        </div>
    </div>    
  </div>
<br>   
{% endif %}
{% endfor %}

<div style="text-align:right">
  <button class="nexttab btn-primary btn next" id="nextbutton">Next</button>
</div>

<script>
  $("input[id='id_pq31_0']").on( "click", function() {
    // if($('#id_qBiasknowledge3_1').is(':checked')) { 
    //   $("#id_qBiasknowledge3_1").prop("checked", false); // automatically select lowest value if prior question == "no"
    // }
    $("#depends").show(); // show biasknowledge3 if biasknowledge2 == "yes"
  });
  
  $("input[id='id_pq31_1']").on( "click", function() {
      $("#depends").hide(); // hide info above table
      $("#id_pq31a_1").prop("checked", true); // automatically select lowest value if prior question == "no"
  });
  </script>

{% endblock %}